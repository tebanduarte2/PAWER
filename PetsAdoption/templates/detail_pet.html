{% extends "base.html" %}

{% block content %}
<div class="container my-5">
    <h1 class="text-center text-primary fw-bold">{{ pet.name }}</h1>

    <div class="card shadow-lg p-4">
        <h2 class="text-secondary">Información de la Mascota</h2>
        {% if pet.image %} <div class="text-center mb-4">
                <img src="{{ pet.image.url }}" alt="{{ pet.name }}" class="img-fluid rounded" style="max-height: 300px;">
            </div>
        {% else %}
            <div class="text-center mb-4">
                <img src="/static/placeholder.png" alt="No image available" class="img-fluid rounded" style="max-height: 300px;">
            </div>
        {% endif %}
        <ul class="list-group list-group-flush">
            <li class="list-group-item"><strong>Edad:</strong> {{ pet.age }} años</li>
            <li class="list-group-item"><strong>Raza:</strong> {{ pet.species }}</li>
            <li class="list-group-item"><strong>Tamaño:</strong> {{ pet.size }} cm</li>
            <li class="list-group-item"><strong>Género:</strong> {{ pet.gender }}</li>
            <li class="list-group-item"><strong>Espacio requerido:</strong> {{ pet.space_required }}</li>
            <li class="list-group-item"><strong>Descripción:</strong> {{ pet.description }}</li>
            <li class="list-group-item"><strong>Compatibilidad:</strong> {{ pet.compatibility }}</li>
        </ul>
        <div class="text-center mt-4"> {# Add margin top for spacing #}
            {% comment %}
                Construct the WhatsApp URL:
                - Base URL: https://wa.me/
                - Phone number: 573206564638 (without +, 00, spaces, or hyphens)
                - Pre-filled message: ?text=Hola%20Pawer,%20quiero%20adoptar%20a%20{{ pet.name }}
                - Use urlencode filter to properly encode the pet name
            {% endcomment %}
            {% url 'pet_detail' pet.id as current_pet_url %} {# Get the current URL for context if needed, though not strictly necessary for the WA link itself #}
            {% with whatsapp_phone="573222046804" %}
                {% with prefilled_message="Hola, Pawer. Me interesa adoptar a " %}
                {% with sufilled_message=", ¿me podrias dar mas información? Gracias. " %}
                    <a href="https://wa.me/{{ whatsapp_phone }}?text={{ prefilled_message|urlencode }}{{ pet.name|urlencode }}{{ sufilled_message|urlencode }}"
                       class="btn btn-success btn-lg" {# Use btn-success for green, btn-lg for larger size #}
                       target="_blank" {# Open in a new tab #}
                       rel="noopener noreferrer"> {# Security best practice for target="_blank" #}
                        <i class="fab fa-whatsapp"></i> {% comment %} Optional: Add WhatsApp icon if using Font Awesome {% endcomment %}
                        Adoptame
                    </a>
                    {% endwith %}
                {% endwith %}
            {% endwith %}
        </div>
    </div>
</div>
{% endblock %}